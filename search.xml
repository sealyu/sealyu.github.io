<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[中文数字和阿拉伯数字的转换]]></title>
    <url>%2Fzh-Hans%2F2017%2F09%2F25%2F%E4%B8%AD%E6%96%87%E6%95%B0%E5%AD%97%E5%92%8C%E9%98%BF%E6%8B%89%E4%BC%AF%E6%95%B0%E5%AD%97%E7%9A%84%E8%BD%AC%E6%8D%A2%2F</url>
    <content type="text"><![CDATA[在微软的面试中遇到一个算法问题，要求将类似于”二十五万五百亿三千零八万一千零三十五”的中文数字转换成对应的阿拉伯数字。结果在面试中一味地想着用栈或者其他数据结构去实现，而没有仔细的分析具体问题和算法就开始写代码，导致完成的非常差劲。 中文数字的特点： 包括零到九的基本数字 数量级文字：十、百、千、万、亿、兆、京。。。等。十百千不能连续出现，从万开始，数量级前缀其他数量级一起使用 算法设计1.使用一个Map存储所有的数量级文字信息： /** * 数量级map，存储对应的数量级文字和对应的阿拉伯数字量值 * @return The operator map */ private static Map&lt;String,Long&gt; getMagnitudeMap(){ Map&lt;String,Long&gt; magnitudeMap = new HashMap(); magnitudeMap.put(&quot;十&quot;, 10l); magnitudeMap.put(&quot;百&quot;, 100l); magnitudeMap.put(&quot;千&quot;, 1000l); magnitudeMap.put(&quot;万&quot;, 10000l); magnitudeMap.put(&quot;亿&quot;, 100000000l); magnitudeMap.put(&quot;兆&quot;, 1000000000000l); magnitudeMap.put(&quot;京&quot;, 10000000000000000l); return magnitudeMap; } 使用另一个Map存储所有的基本数字信息： /** * 基本数据map，存储对应的基本数据及对应的阿拉伯数字量值 * @return The magnitude map */ private static Map&lt;String,Long&gt; getDataMap(){ Map&lt;String,Long&gt; dataMap = new HashMap&lt;&gt;(); dataMap.put(&quot;一&quot;,1l); dataMap.put(&quot;二&quot;,2l); dataMap.put(&quot;三&quot;,3l); dataMap.put(&quot;四&quot;,4l); dataMap.put(&quot;五&quot;,5l); dataMap.put(&quot;六&quot;,6l); dataMap.put(&quot;七&quot;,7l); dataMap.put(&quot;八&quot;,8l); dataMap.put(&quot;九&quot;,9l); dataMap.put(&quot;零&quot;,0l); return dataMap; } 2.从后往前遍历字符串，遇到数字的时候，如果是零直接跳过，否则将当前数字前一位数量级相乘并累加到sumvalue中。 /** * 从后往前遍历字符串的方式将中文数字转换为阿拉伯数字 * @param inputStr 源字符串 * @return 转换后的阿拉伯数字 * @throws Exception 如果字符串中有不能识别的（不在dataMap和operatorMap）字符，抛出异常 */ public long convertToLongFromEnd(String inputStr) throws Exception{ //存储遇到该数字前的最大一个数量值，这个值是累乘之前所有数量级， //比如二百万，到二的时候最高数量级就是100*10000 long currentMaxLevel = 1l; //存储之前一次执行过乘操作的数量级 long previousOpeMagnitude = 1l; //存储当前字符所对应的数量级 long currentMagnitude = 1l; //存储当前所有字符仲最大的单个字符的数量级， long maxMagnitude = 1l; long sumVal = 0l; int len = inputStr.length(); //倒序循环整个字符串，从最低位开始计算整个数值 for(int i=len-1;i&gt;=0;i--){ String currentTxt = String.valueOf(inputStr.charAt(i)); //如果当前值是数量级 if(magnitudeMap.containsKey(currentTxt)){ currentMagnitude = magnitudeMap.get(currentTxt); //如果第一位是一个数量级（比如十二）, 将当前值相加 if(i == 0){ sumVal = sumVal + currentMagnitude; return sumVal; } //比较当前数量级与当前最大数量值，如果大于当前最大值，将当然最大数量值更新为当前数量级 if(currentMagnitude &gt; currentMaxLevel){ currentMaxLevel = currentMagnitude; }else{ if(currentMagnitude &lt; maxMagnitude &amp;&amp; currentMagnitude &gt; previousOpeMagnitude){ //如果当前数量级小于当前最大数量级并且大于之前的数量级,比如二十五万五百亿，抵达&quot;万&quot;的时候因为之前的百 //已经与亿相乘，所以应该除以之前的百才能得到当前真正的最大数量值 currentMaxLevel = currentMaxLevel*currentMagnitude/previousOpeMagnitude; }else{ currentMaxLevel = currentMaxLevel*currentMagnitude; } previousOpeMagnitude = currentMagnitude; } //将当前最大单数量级更新为当前数量级 if(currentMagnitude &gt; maxMagnitude){ maxMagnitude = currentMagnitude; } }else if(dataMap.containsKey(currentTxt)){ //如果是0~9之间的数字，与前面一位数量级相乘，并累加到当前sumVal long data = dataMap.get(currentTxt); if(data == 0){ //跳过0 continue; }else{ sumVal = sumVal + data*currentMaxLevel; } }else{ throw new Exception(&quot;Find illegal character in the input string:&quot;+currentTxt); } } return sumVal; }]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Design Pattern 笔记 - 代理模式(Proxy Pattern)]]></title>
    <url>%2Fzh-Hans%2F2017%2F09%2F22%2FDesign-Pattern-Note-Proxy-Pattern%2F</url>
    <content type="text"></content>
      <categories>
        <category>Design Pattern</category>
      </categories>
      <tags>
        <tag>Design Pattern</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Red–black BST with no extra memory]]></title>
    <url>%2Fen%2F2017%2F05%2F16%2Fred-black-bst-with-no-extra-memory%2F</url>
    <content type="text"><![CDATA[I am in a couresa course for algorithm, and in the quiz there’s 1 question: Red–black BST with no extra memory. Describe how to save the memory for storing the color information when implementing a red–black BST. I saw some posts which are talking about using pointer(like c or c++ which support pointer) to store the color infomration. But for java, there’s no concept like pointer. So 1 solution is to modify the BST tree structure, using the different order to flag the color information: Red: Store the color information in the right side node of the red link, as chart below, store the information in node C/J/X. Using inverse order other than original BST tree, means put it’s larger child to left and smaller child to right for those nodes which store the color information. No matter it has 1 or 2 child, if the color is red, then use the inverse order, and use original order if it’s black. Since the node with red color always has at least 1 left child, then this structure will be able to store the color information without any extra memory cost.]]></content>
      <categories>
        <category>Algorithm</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[L1 Visa renewal or extension?]]></title>
    <url>%2Fen%2F2016%2F10%2F11%2Fl1-visa-renewal-or-extension%2F</url>
    <content type="text"><![CDATA[For L1 visa, I got it at 2014-11-4 : expiration date as 2016-11-6, I-129S, expiration date as 2017-11-4 I-94, expiration date as 2019-11-4 I need to go back to China at 2016-12-3, and at the time my visa is going to be expired, and then when I come back to US at 2016-12-20, i will not able to entry. This problem is driving me crazy these sevral days. And finally I releaize it’s not a big deal. What i need to do is only the L1 VISA renewal. Here is what it means: Extension is the process of requesting extension of stay as well as work period in US. It is filed by filing I539 ( for extension of stay) and I129 (extension for petition to work). Now generally, all this achieves is the extension of I-94. USCIS would reject the request for extension if applied more than 6 Months before I-94 expiry stating that extension is not required as I am already allowed to stay and work till 2019. So I don’t need to file an extension now. 2.As for renewal, it typically means, getting a new visa in my passport. This can happen only outside US. I need to go to the consulate outside US, take interview appointment based on my DS-160, take the I129S, and I797, and supporting documents, and face the Visa Officer and if granted, would get a new L1 stamp in my passport. The advantage of renewal is that I get fresh visa and the freedom to enter US multiple times as long as visa is valid. &nbsp; &nbsp;]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>Life</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JSF 2 + Richfaces 4 + Seam]]></title>
    <url>%2Fen%2F2016%2F10%2F05%2Fjsf-2-richfaces-4-seam%2F</url>
    <content type="text"><![CDATA[In order to overwrite the default richfaces 4 ecss styles, from the document(https://docs.jboss.org/richfaces/latest/Developer_Guide/en-US/html_single/#sect-Developer_Guide-RichFaces_overview-Restrictions). You need to put it to &lt;h:body&gt; section:JSF does render resource links (stylesheets, scripts) in order of occurrence, thus if you add &amp;lt;h:outputStylesheet&amp;gt; to the &amp;lt;h:head&amp;gt;section, JSF will render it before the RichFaces resource links (dependencies of RichFaces components). To be able to overwrite RichFaces stylesheets and re-use RichFaces JavaScript implementation, you need to render &amp;lt;h:outputStylesheet&amp;gt; to the &amp;lt;h:body&amp;gt;section (safe solution is to place it on the end of the section; however to keep readability, you can use start of the section). &nbsp;]]></content>
      <categories>
        <category>UI</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Failed Again on H1B lottery]]></title>
    <url>%2Fen%2F2016%2F05%2F04%2Ffailed-again-on-h1b-lottery%2F</url>
    <content type="text"><![CDATA[Life is not always good. When god open a window for you, he might close the door! My 3rd time for H1B lottery failed again. What the f*!!!!]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>Life</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[美国费城买车小记]]></title>
    <url>%2Fzh-Hans%2F2016%2F04%2F28%2F%E7%BE%8E%E5%9B%BD%E8%B4%B9%E5%9F%8E%E4%B9%B0%E8%BD%A6%E5%B0%8F%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[今天终于完成了所有买车的流程，拿到Passat的钥匙和title。在美国呆了一年多，因为公司离住的地方很近，即使呆在这个『车轮上的国度』也一直只是靠走路。当然，另一个原因就是费城发达的公共交通。因为儿子即将过来读书，所以不得不买一辆车代步，以方便以后带儿子explore各种好吃好玩的地方。 整个过程花了大约两周时间，也看过四五辆车子，总体来说还算比较顺利。现在把这个过程记录下来，也算一种不错的经历。 在美国买车可以通过两种方式，从Dealer或者私人手上买车。从Dealer买车会相对放心一点，但是价格相对也会高很多。所以选择从私人买车。因为正值学生毕业季，身在费城这个很多大学很多华人留学生的城市，可供选择的车还是挺多的。 整个过程看了5辆车子，2012年的凯美瑞、2010年的Acua、2013年的Nissan Altima、2007年的奥迪A4还有2012年的Passat。寻找这些车子的信息主要是费城和北美这边几个大的华人论坛（北美微论坛、费城华人资讯网、美国同程网）和Craglist，最后发现信息最多的是北美微论坛，车子也是在这里看到车主的广告后联系购买的。 看了5两车子，前面几辆车子都有或多或少的一些问题。所以最后决定了买Passat。从看车到买车总共花了不到一周时间全部搞定： 约了原车主看车（原车主是个即将毕业的小伙子，住的很近而且国内的地址也离得很近，还是挺有缘分的）。当天试驾了一下，整体车况很不错，2012年高配的Passat SE，5 cyl，蓝牙、天窗、加热皮座椅等。驾驶感觉也不错。因为原车主由于毕业急着卖出去，所以给的价格也不是很高，基本上当天双方就定下来交易了。 美国买车前最好必须要做的一件事是查看Carfax和Autocheck报告。这两个报告记录了所有车子的信息，包括里程数，保养记录，是否有事故，之前有几任车主以及是不是之前这个车子被用来出租用。而且这两个公司的信息来源不同，记录的信息有时候也不全面，最好是都看一下。我看Camry的时候就是看到Carfax没有车祸记录而且是clean title所以准备买，结果后来发现Autocheck上记录了车祸记录，这样会影响买车时候的价格。Passat车子的Carfax和Autocheck全部是Clean的，所以很放心的就决定要买了。 因为手上现金不够，所以根据印度同事的建议，去DCU贷款（https://www.dcu.org/index.html）。DCU的贷款利率比各大银行利率都会低很多，而且如果Credit Score高的话，这个rate会很低。像我拿到的是2.99%的利率，如果是去BOA的话，这个肯定要5%以上。Online提交了我的各种信息，以及和车主签订的sales agreement还有车子title的扫描件，两个工作日之内就办完了贷款，然后使用FedEx的加急服务，贷款完成的第二天晚上就拿到了支票。这个支票是签给seller的，而且必须要seller和buyer两个人同时签名才能入账。 买车之前最好是去做一个merchanic check，周边很多连锁的店都可以做，比如Firestone。但是因为车主之前是从Dealer那里买的Certified Pre-Own车子，车况也比较好，所以就没有去做。 在Pennsvalnia，买车前还必须要做的一件事情就是去买Auto insurance。根据同事的推荐，在几个大的保险公司Geico、StateFarm、Progressive都拿了Quote。比较了一下还是Statefarm比较好。所以提供了自己的各种信息，电话里提供了信用卡信息和车子的VIN号码，几分钟就完成了保险的购买。6个月的policy，总共价格不到600刀。Agent立刻寄给我ID Card，以便第二天去办理过户。 和车主第二天去办理过户手续，因为听说人很多所以没有去DMV，就在家附近的Penn DOT授权的Agent那里办理，整个过程用了不到办个小时： 车主提供了title，registration，并且在title上面签好了自己的名字，报了车子的公里数 本人提供了有效宾州的驾照，保险的ID card，在title上签名 本来是想sign as gift，这样可以省掉8%的税。但是因为有贷款，所以就把价格报的和贷款数额一样，这样也省掉了大约500刀购置税。 除了税，其他的过户手续等大约花了150左右，拿到了新的车牌和registration。 将车子换好车牌，拿到车钥匙，全部交易完毕。&nbsp; &nbsp;]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>Life</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javascript timezone issue with backend server in different zone]]></title>
    <url>%2Fen%2F2015%2F10%2F02%2Fjavascript-timezone-issue-with-backend-server-in-different-zone%2F</url>
    <content type="text"><![CDATA[Today I met an problem when doing the test in the server from different timezone: Client select a date(Say 2015-10-1 ) from the form, angular populate the datetime with new Date() from javascript and pass it to server. After saving the object and then display it, it’s displayed as ‘2015-9-30 23:00:00’. And every time after doing this, we have 1 hour difference.Then I realize this should be a timezone issue and check the document: “When populating the date and no timezone is specified, it default to use the local timezone from the client browser”. Since our QA server is from different timezone, we always has the 1 hour difference. Solution: We could have multiple solutions for this. But our requirement is pretty straightforward, we just want no matter which date the client selected, we have the same value saved to database. So I changed the value that we passed to server to be a string value(like ‘2015/10/1’) and parse the date from server side, instead of using the datatime long value. There also some other solution referred: http://www.techrepublic.com/article/convert-the-local-time-to-another-time-zone-with-this-javascript/ http://momentjs.com/timezone/docs/]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Javascript</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[EJB3.0 和 EJB2 的区别]]></title>
    <url>%2Fzh-Hans%2F2014%2F01%2F06%2FEJB3.0%20%E5%92%8C%20EJB2%20%E7%9A%84%E5%8C%BA%E5%88%AB%2F</url>
    <content type="text"><![CDATA[1. EJB2.0使用EntityBeans来访问数据库，EJB3.0是使用JPA（Java Persistance API）来访问数据库。 2. EJB2.0 有部署脚本(Deployment descriptiors),EJB3.0没有。 3. EJB3.0不需要Home接口，EJB2.0需要。 4. EJB3.0简化了开发，引入了元数据。 5. EJB2 限制开发人员无法在 EJB 容器外部测试 EJB 模块 ， EJB3可以更方便的使用JUnit等测试框架 6.EJB3 可以使用更多元化的SQL查询语言，包括native查询，而EJB2使用的是EJBQL。 7.EJB3的annotation的使用 8.EJB2中需要创建多个不必要的组件接口，而且要捕获一些不需要的异常信息，使用不太灵活]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>EJB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[儿子第一次用MSN和我的聊天记录]]></title>
    <url>%2Fzh-Hans%2F2011%2F08%2F19%2F%E5%84%BF%E5%AD%90%E7%AC%AC%E4%B8%80%E6%AC%A1%E7%94%A8MSN%E5%92%8C%E6%88%91%E7%9A%84%E8%81%8A%E5%A4%A9%E8%AE%B0%E5%BD%95%2F</url>
    <content type="text"><![CDATA[140101m,,mmmmmmmmmmmmp010看过晕ti\9.5 不会呼唤 9 提议明年，， 男男女女男男女女男男女女男男女女年内能000000000000]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>Life</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[一个句号引发的惨案]]></title>
    <url>%2Fzh-Hans%2F2011%2F04%2F01%2F%E4%B8%80%E4%B8%AA%E5%8F%A5%E5%8F%B7%E5%BC%95%E5%8F%91%E7%9A%84%E6%83%A8%E6%A1%88%2F</url>
    <content type="text"><![CDATA[今天客户对之前做的东西做了一个修改，要求是：Please add a period to the end of the message. 看来看去，没想起来到底要加什么period。加一段日期进去？加什么日期呢？ 问了一下，客户回复：I mean the period（。） 靠，period原来还有句号的意思，这么多年英语白学了，还以为客户的需求没给明白，汗！]]></content>
      <categories>
        <category>Life</category>
      </categories>
      <tags>
        <tag>Life</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[nvarchar与varchar的区别]]></title>
    <url>%2Fzh-Hans%2F2010%2F11%2F29%2Fnvarchar%E4%B8%8Evarchar%E7%9A%84%E5%8C%BA%E5%88%AB%2F</url>
    <content type="text"><![CDATA[nvarchar与varchar的区别&amp;lt;/p&gt; varchar[(n)]长度为 n 个字节的可变长度且非 Unicode 的字符数据。n必须是一个介于 1 和 8,000 之间的数值。存储大小为输入数据的字节的实际长度，而不是 n个字节。所输入的数据字符长度可以为零。varchar 在 SQL-92 中的同义词为 char varying 或character varying。 nvarchar(n)包含 n个字符的可变长度 Unicode 字符数据。n 的值必须介于 1 与 4,000之间。字节的存储大小是所输入字符个数的两倍。所输入的数据字符长度可以为零。nvarchar 在 SQL-92 中的同义词为national char varying 和 national character varying。&amp;amp;nbsp; 通俗一點就是varchar適合輸入英文和數字，nvarchar一般用做中文或其它語言的輸入，這樣到別的語系不會出現亂碼:))]]></content>
      <categories>
        <category>Database</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Interceptor 中onFlushDirty()函数执行多次的问题（Hibernate 的一个小Bug）]]></title>
    <url>%2Fzh-Hans%2F2008%2F05%2F09%2FInterceptor%20%E4%B8%ADonFlushDirty()%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E5%A4%9A%E6%AC%A1%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%88Hibernate%20%E7%9A%84%E4%B8%80%E4%B8%AA%E5%B0%8FBug%EF%BC%89%2F</url>
    <content type="text"><![CDATA[最近在项目中遇到一个奇怪的问题，在使用Hibernate拦截器捕获实体变化并进行处理时，发现其中的onFlushDirty()函数执行了很多次，导致进行处理时产生很多重复数据。具体问题如下：使用一个类继承Hibernate的EmptyInterceptor类来对程序中的实体变化进行拦截，并在其中的onFlushDirty()函数中对捕获的数据进行处理，产生对应的event数据并保存到数据库中。 例如：&lt;br /&gt;public class EventInterceptor extends EmptyInterceptor {public boolean onFlushDirty(Object entity,Serializable id,Object[] currentState,Object[] previousState,String[] propertyNames,Type[] types ) throws CallbackException { if(isAuditable(entity)){//如果该实体需要被记录，生成对应的event。&lt;br /&gt;//此处生成对应的event。&lt;br /&gt;}return false;} 在程序执行后，发现对应一条实体的变化生成了多条重复的event记录，非常不解。&lt;br /&gt;后来google发现，有人也碰到过对应的问题，并在Hibernage论坛中提出过这个问题，鉴定为Hibernate的一个小Bug。&lt;br /&gt;（原文地址：http://forum.hibernate.org/viewtopic.php?t=940410&amp;highlight=interceptor+onflushdirty）&lt;br /&gt;解决方法如下：&lt;br /&gt;将FlushMode改为：FlushMode.COMMIT或者也可以提前进行flush()都可以解决这个问题。&lt;br /&gt;]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[sql server 中删除默认约束的通用sql脚本]]></title>
    <url>%2Fzh-Hans%2F2008%2F04%2F17%2Fsql%20server%20%E4%B8%AD%E5%88%A0%E9%99%A4%E9%BB%98%E8%AE%A4%E7%BA%A6%E6%9D%9F%E7%9A%84%E9%80%9A%E7%94%A8sql%E8%84%9A%E6%9C%AC%2F</url>
    <content type="text"><![CDATA[作者： sealyu 日期：2008-04-17在SQL Server 中，如果给表的一个字段设置了默认值，就会在系统表sysobjects中生成一个默认约束。&lt;br /&gt;如果想删除这个设置了默认值的字段（假设此字段名column1），执行“ALTER TABLE table1 DROP COLUMN column1”时就会报错：The object ‘DF__xxxxxxxxxxx’ is dependent on column ‘column1’.ALTER TABLE DROP COLUMN column1failed because one or more objects access this column. 所以在删除此字段时需要先将系统表中的对应默认约束删除， 可以使用下面的脚本进行删除：– this script drops the default constraint which is generated by the setting of default value.DECLARE @tablename VARCHAR(100), @columnname VARCHAR(100), @tab VARCHAR(100)SET @tablename=’CountryGroupEmailAndWaitAux’SET @columnname=’actionOfHasNoValidEmail’ declare @defname varchar(100)declare @cmd varchar(100) select @defname = nameFROM sysobjects soJOIN sysconstraints scON so.id = sc.constidWHERE object_name(so.parent_obj) = @tablenameAND so.xtype = ‘D’AND sc.colid =(SELECT colid FROM syscolumnsWHERE id = object_id(@tablename) ANDname = @columnname) select @cmd=’alter table ‘+ @tablename+ ‘ drop constraint ‘+ @defnameif @cmd is null print ‘No default constraint to drop’exec (@cmd) 在删除对应的默认约束后，执行：&lt;br /&gt;ALTER TABLE table1 DROP COLUMN column1即可删除字段。&lt;br /&gt;]]></content>
      <categories>
        <category>Database</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
</search>
